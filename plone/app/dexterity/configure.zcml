<configure
    xmlns="http://namespaces.zope.org/zope"
    xmlns:five="http://namespaces.zope.org/five"
    xmlns:genericsetup="http://namespaces.zope.org/genericsetup"
    i18n_domain="plone.app.dexterity">

    <include package="plone.z3cform"/>
    <include package="plone.dexterity" />
    <include package="plone.schemaeditor" />
    
    <five:registerPackage package="." initialize=".initialize" />

    <genericsetup:registerProfile
        name="default"
        title="Dexterity Content Types"
        description="Adds support for managing Dexterity content types through the web"
        directory="profiles/default"
        provides="Products.GenericSetup.interfaces.EXTENSION"
        for="Products.CMFPlone.interfaces.IPloneSiteRoot"
        />

    <include package=".browser" />

    <!-- Register schema/field modify handlers -->
    <subscriber
        for="plone.schemaeditor.interfaces.IField
             zope.lifecycleevent.interfaces.IObjectModifiedEvent"
        handler=".serialize.serialize_schema_on_field_event"
        />
    <subscriber
        for="plone.schemaeditor.interfaces.IField
             zope.app.container.interfaces.IObjectAddedEvent"
        handler=".serialize.serialize_schema_on_field_event"
        />
    <subscriber
        for="plone.schemaeditor.interfaces.IField
             zope.app.container.interfaces.IObjectRemovedEvent"
        handler=".serialize.serialize_schema_on_field_event"
        />
    <subscriber
        for="plone.schemaeditor.interfaces.IField
             zope.app.container.interfaces.IObjectMovedEvent"
        handler=".serialize.serialize_schema_on_field_event"
        />
    <subscriber
        for="zope.interface.interfaces.IInterface
             zope.app.container.interfaces.IContainerModifiedEvent"
        handler=".serialize.serialize_schema_on_schema_event"
        />

</configure>
